function mattcaGallery(a,b,c){function d(){ab=window.innerWidth,bb=window.innerHeight,T=document.querySelector("body");var a='<div id="loading"><p>Loading...</p></div><div class="close-icon"></div><div class="right-arrow-icon arrow"></div><div class="left-arrow-icon arrow"></div><div id="gallery" style="position:absolute; left: -'+ab+"px; width: "+3*ab+'px"></div>';T.classList.add("fade-left-arrow"),T.innerHTML=a,U=document.getElementById("gallery"),kb=document.querySelector(".right-arrow-icon"),lb=document.querySelector(".left-arrow-icon"),mb=document.querySelector(".close-icon"),K(),db=window.location.search,eb=/photo=(\d*)/,fb=eb.exec(db),e(),S(),null==b||""==b?(mb.style.display="none",b=""):b=b,c=null==c?3:c}function e(){if(V=new Array,null!=fb&&""!=fb[1]&&fb[1]<Kb.length&&fb[1]>=0)for(Mb=fb[1]-0,Y=0;Y<Kb.length;)Y>=Mb-c&&Mb+c>=Y&&(Ob++,image=new Image,image.addEventListener("load",g,!1),image.src=Kb[Y],V.push(image)),Y++;else for(Y=0;c>Y;)Ob++,V[Y]=new Image,V[Y].addEventListener("load",g,!1),V[Y].src=Kb[Y],Y++;W=new Array,Ob++,hb=new Image,hb.addEventListener("load",g,!1),hb.src="https://s3-us-west-2.amazonaws.com/mattca-images/gallery-script/ajax-loader.gif",W.push(hb),Ob++,ib=new Image,ib.addEventListener("load",g,!1),ib.src="https://s3-us-west-2.amazonaws.com/mattca-images/gallery-script/arrows.png",W.push(ib),Ob++,jb=new Image,jb.addEventListener("load",g,!1),jb.src="https://s3-us-west-2.amazonaws.com/mattca-images/gallery-script/back-button.png",W.push(jb)}function f(){for(X=new Array(Kb.length),Y=0;Y<Kb.length;){Z=0;for(var a=!1;Z<V.length;)V[Z].src==Kb[Y]&&(X[Y]=V[Z],a=!0),Z++;a||(X[Y]=new Image,X[Y].src=Kb[Y]),Y++}}function g(){Ob--,0==Ob&&h()}function h(){for(f(),Lb=!0,Y=0,$="";Y<Kb.length;)$+='<div class="container"><div class="photo"></div></div>',Y++;U.innerHTML=$,_=!1,imgWidth=currentWidth=ab,imgHeight=currentHeight=bb,a=document.querySelectorAll("#gallery .photo"),J(),window.scrollTo(0,0),C(),Q(null!=fb&&""!=fb[1]&&fb[1]<Kb.length&&fb[1]>=0?parseInt(fb[1]):0),setTimeout(i,510),setTimeout(z,1010),V=null}function i(){document.querySelector("#loading").classList.add("loaded")}function j(a){a.preventDefault(),Pb||(1!=a.touches.length||Sb?1==a.touches.length&&Sb?(Qb=!0,Rb=!1,Sb=!0,pb=a.targetTouches[0].pageX,qb=a.targetTouches[0].pageY):2==a.touches.length&&(Qb=!1,Rb=!0,Sb=!0,xb=a.targetTouches[0].pageX,yb=a.targetTouches[0].pageY,zb=a.targetTouches[1].pageX,Ab=a.targetTouches[1].pageY,Bb=Math.sqrt(Math.pow(zb-xb,2)+Math.pow(Ab-yb,2)),(Vb=1)&&(_b=(xb+zb)/2,ac=(yb+Ab)/2),B(),H(0)):(Qb=!1,Rb=!1,Sb=!1,nb=a.targetTouches[0].pageX,startY0=a.targetTouches[0].pageY))}function k(a){if(a.preventDefault(),!Pb)if(Qb||Rb||Sb){if(Qb)rb=a.touches[0].pageX,sb=a.touches[0].pageY,tb=rb-pb,ub=sb-qb,vb=Tb+tb,wb=Ub+ub,ab>=vb+Hb+(ab-Hb)*Vb?(vb=0,Hb=ab):vb+Hb*(1-Vb)>=0&&(vb=0,Hb=0),bb>=wb+Ib+(bb-Ib)*Vb?(wb=0,Ib=bb):wb+Ib*(1-Vb)>=0&&(wb=0,Ib=0),G(Hb,Ib,vb,wb,Vb);else if(Rb){if(2!=a.touches.length)return;if(T.classList.contains("zoomed")||T.classList.add("zoomed"),Cb=a.targetTouches[0].pageX,Db=a.targetTouches[0].pageY,Eb=a.targetTouches[1].pageX,Fb=a.targetTouches[1].pageY,Gb=Math.sqrt(Math.pow(Eb-Cb,2)+Math.pow(Fb-Db,2)),Vb=Gb/Bb*Wb,1>Vb&&(Vb=1),Vb>5&&(Vb=5),1==Vb&&1==Wb)return;if(5==Vb&&5==Wb)return;Hb=((xb+zb)/2-Zb)/Wb,Ib=((yb+Ab)/2-$b)/Wb,bc=_b-Hb,cc=ac-Ib,1==Vb&&(bc=0,cc=0),ab>=bc+Hb+(ab-Hb)*Vb?(bc=0,Hb=ab):bc+Hb*(1-Vb)>=0&&(bc=0,Hb=0),bb>=cc+Ib+(bb-Ib)*Vb?(cc=0,Ib=bb):cc+Ib*(1-Vb)>=0&&(cc=0,Ib=0),G(Hb,Ib,bc,cc,Vb)}}else{L();var b=parseFloat(a.targetTouches[0].pageX)-parseFloat(nb);H(b),B()}}function l(b){b.preventDefault(),Pb||(Qb||Rb||Sb?Qb?(Ub=wb,Tb=vb,_b=Hb,ac=Ib,Xb=vb,Yb=wb,Zb=a[Mb].getBoundingClientRect().left,$b=a[Mb].getBoundingClientRect().top):Rb&&(Wb=Vb,_b=Hb,ac=Ib,Xb=bc,Yb=cc,Zb=a[Mb].getBoundingClientRect().left,$b=a[Mb].getBoundingClientRect().top,1==Vb&&(Sb=!1,A(),K()),Ub=bc,Tb=cc):(K(),kb.classList.remove("active"),lb.classList.remove("active"),ob=b.changedTouches[0].pageX,endY0=b.changedTouches[0].pageY,ob+5>=nb&&nb>=ob-5&&endY0+5>=startY0&&startY0>=endY0-5?y():(nb>ob?M()?O():(K(),H(0)):N()?P():(K(),H(0)),setTimeout(A,500,!0))))}function m(){}function n(){a[Mb].style["-webkit-transform-origin"]="",a[Mb].style["-moz-transform-origin"]="",a[Mb].style["-ms-transform-origin"]="",a[Mb].style["transform-origin"]="",a[Mb].style["-webkit-transform"]="translateX(0px) translateY(0px) scale(1)",a[Mb].style["-moz-transform"]="translateX(0px) translateY(0px) scale(1)",a[Mb].style["-ms-transform"]="translateX(0px) translateY(0px) scale(1)",a[Mb].style.transform="translateX(0px) translateY(0px) scale(1)",Wb=1,_b=0,ac=0,Xb=0,Yb=0,Ub=bc,Tb=cc,Zb=0,$b=0}function o(a){a.preventDefault(),a.target.classList.add("active")}function p(a){a.preventDefault(),a.target.classList.contains("right-arrow-icon")?E():F(),a.target.classList.remove("active")}function q(a){a.preventDefault(),nb=a.clientX,startY0=a.clientY,U.addEventListener("mousemove",r,!1),U.classList.add("moving"),L()}function r(a){if(a.preventDefault(),Sb){ob=a.clientX,endY0=a.clientY,bc=Xb-(nb-ob),cc=Yb-(startY0-endY0);var b=ab,c=bb;b>=bc+Hb+(b-Hb)*Wb?(bc=0,Hb=b):bc+Hb*(1-Wb)>=0&&(bc=0,Hb=0),c>=cc+Ib+(c-Ib)*Wb?(cc=0,Ib=c):cc+Ib*(1-Wb)>=0&&(cc=0,Ib=0),G(Hb,Ib,bc,cc,Wb)}else{var d=parseFloat(a.clientX)-parseFloat(nb);H(d)}}function s(a){a.preventDefault(),U.removeEventListener("mousemove",r,!1),U.classList.remove("moving"),K(),Sb?(Xb=bc,Yb=cc,(nb==ob||null==ob)&&y()):(ob=a.clientX,nb==ob?y():(nb>ob?M()?O():(K(),H(0)):N()?P():(K(),H(0)),setTimeout(A,500,!0)))}function t(b){Jb="DOMMouseScroll"==b.type?-120*b.detail:b.wheelDelta,Jb>0&&(B(),Sb=!0);var c=Wb+Jb/1e3,d=20;1>c?(c=1,A(),Sb=!1):c>d&&(c=d);var e=b.clientX-Zb,f=b.clientY-$b,g=_b*Wb,h=ac*Wb;if(Hb=e/Wb,Ib=f/Wb,(Math.abs(e-g)>1||Math.abs(f-h)>1)&&d>Wb?(Xb+=(e-g)*(1-1/Wb),Yb+=(f-h)*(1-1/Wb)):(1!=Wb||e!=g&&f!=h)&&(Hb=g/Wb,Ib=h/Wb),0>=Jb){var i=ab,j=bb;i>=Xb+Hb+(i-Hb)*c?(Xb=0,Hb=i):Xb+Hb*(1-c)>=0&&(Xb=0,Hb=0),j>=Yb+Ib+(j-Ib)*c?(Yb=0,Ib=j):Yb+Ib*(1-c)>=0&&(Yb=0,Ib=0)}G(Hb,Ib,Xb,Yb,c),Zb=a[Mb].getBoundingClientRect().left,$b=a[Mb].getBoundingClientRect().top,Vb=c,Wb=c,_b=Hb,ac=Ib,Ub=Xb,Tb=Yb}function u(a){a.preventDefault(),a.target.classList.add("active")}function v(a){a.preventDefault(),a.target.classList.remove("active")}function w(a){a.preventDefault(),kb.classList.remove("active"),lb.classList.remove("active")}function x(a){a.preventDefault();var b=a.keyCode?a.keyCode:a.which;39==b||40==b?(kb.classList.add("active"),M()&&O()):(37==b||38==b)&&(lb.classList.add("active"),N()&&P())}function y(){T.classList.contains("icons-visible")?(_=!0,B()):(z(),_=!1)}function z(){T.classList.add("icons-visible"),T.classList.add("not-zoomed"),T.classList.remove("zoomed")}function A(a){Sb||(a="undefined"!=typeof a?a:!1,a?(cb&&clearTimeout(cb),cb=setTimeout(A,1400)):_||z(),C())}function B(){T.classList.remove("icons-visible")}function C(){0==Mb?(T.classList.contains("fade-left-arrow")||T.classList.add("fade-left-arrow"),T.classList.remove("fade-right-arrow")):Mb==Kb.length-1?(T.classList.contains("fade-right-arrow")||T.classList.add("fade-right-arrow"),T.classList.remove("fade-left-arrow")):(T.classList.remove("fade-left-arrow"),T.classList.remove("fade-right-arrow"))}function D(){window.location.href=b}function E(){Pb||M()&&O()}function F(){Pb||N()&&P()}function G(b,c,d,e,f){a[Mb].style["-webkit-transform-origin"]=b+"px "+c+"px",a[Mb].style["-ms-transform-origin"]=b+"px "+c+"px",a[Mb].style["transform-origin"]=b+"px "+c+"px",a[Mb].style.MozTransformOrigin=b+"px "+c+"px",a[Mb].style["-webkit-transform"]="translateX("+d+"px) translateY("+e+"px) scale("+f+")",a[Mb].style["-ms-transform"]="translateX("+d+"px) translateY("+e+"px) scale("+f+")",a[Mb].style.transform="translateX("+d+"px) translateY("+e+"px) scale("+f+")"}function H(a){Nb=a,U.style.transform="translateX("+a+"px)",U.style["-webkit-transform"]="translateX("+a+"px)",U.style["-ms-transform"]="translateX("+a+"px)"}function I(){ab=window.innerWidth,bb=window.innerHeight,U.style.left=-ab+"px",U.style.width=3*ab+"px",J(),window.scrollTo(0,0),n(),Q(Mb)}function J(){[].forEach.call(a,function(a){a.style.width=ab+"px"})}function K(){U.classList.add("transition")}function L(){U.classList.remove("transition")}function M(){return null!=Kb[Mb+1]?!0:!1}function N(){return null!=Kb[Mb-1]?!0:!1}function O(){Pb=!0,K(),Mb+=1,gb?(clearTimeout(gb),H(0),Q(Mb)):(H(-ab),gb=setTimeout(Q,500,Mb))}function P(){Pb=!0,K(),Mb-=1,gb?(clearTimeout(gb),H(0),Q(Mb)):(H(ab),gb=setTimeout(Q,500,Mb))}function Q(a){gb=null,L(),Sb&&n(),Mb=a,H(0),R(K),C(),Pb=!1}function R(){for(Y=0,$="";Y<Kb.length;)Y>=Mb-c&&Mb+c>=Y?(a[Y].style.backgroundSize="",a[Y].style.backgroundImage="url("+X[Y].src+")",a[Y].style.transform="translateZ(0)",a[Y].style["-webkit-transform"]="translateZ(0)",a[Y].style["-ms-transform"]="translateZ(0)",a[Y].style["-webkit-backface-visibility"]="hidden",a[Y].style.marginLeft=0,null==a[Y].parentNode&&U.children[Y].appendChild(a[Y])):null!=a[Y].parentNode&&a[Y].parentNode.removeChild(a[Y]),Y++;0==Mb&&(a[0].style.marginLeft=ab+"px")}function S(){U.addEventListener("touchstart",j,!1),U.addEventListener("touchmove",k,!1),U.addEventListener("touchend",l,!1),U.addEventListener("touchcancel",m,!1),kb.addEventListener("touchstart",o,!1),lb.addEventListener("touchstart",o,!1),kb.addEventListener("touchend",p,!1),lb.addEventListener("touchend",p,!1),U.addEventListener("mousedown",q,!1),U.addEventListener("mouseup",s,!1);var a=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";U.addEventListener(a,t,!1),kb.addEventListener("mouseover",u,!1),kb.addEventListener("mouseout",v,!1),lb.addEventListener("mouseover",u,!1),lb.addEventListener("mouseout",v,!1),window.addEventListener("keyup",w,!1),window.addEventListener("keydown",x,!1),mb.addEventListener("click",D,!1),kb.addEventListener("click",E,!1),lb.addEventListener("click",F,!1),window.addEventListener("resize",I,!1)}var T,U,V,W,X,Y,Z,$,_,ab,bb,a,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb=arguments[0],Lb=!1,Mb=0,Nb=0,Ob=0,c=arguments[2],b=arguments[1],Pb=!1,Qb=!1,Rb=!1,Sb=!1,Tb=0,Ub=0,Vb=1,Wb=1,Xb=0,Yb=0,Zb=0,$b=0,_b=0,ac=0,bc=0,cc=0;"complete"==document.readyState?d():document.addEventListener("DOMContentLoaded",function(){d()},!1)}